
> library(ranger)
>  library(ggfortify)
>  library(ggplot2)
>  dia <- read.csv("diabetic_data.csv",TRUE,",")
>  #DRUG : METFORMIN
>  dia <- dia %>%
+         mutate(diabetesMed = ifelse(diabetesMed == "NO",0,1))
>  #KEPLER MEIER FIT FOR METFORMIN DRUG
> 
> 
>  metformin_km_fit <- survfit(Surv(time_in_hospital,diabetesMed) ~ metformin,data = dia)
>  met_test = mean(summary(metformin_km_fit$surv))
>  if(met_test > 0.5)
+  { 
+       print("FURTHUR TREATMENT IS NOT REQUIRED")
+       print("PATIENT HAS BEEN CURED WITH THE DRUG ALONE")
+  }else{
+       #METFORMIN WITH INSULIN
+       #KEPLER MEIER FIT
+ 
+       dia1 <- subset(dia , readmitted ==">30"|readmitted == "<30")
+       dia1 <- dia1 %>%
+               mutate(readmitted = ifelse(readmitted == ">30" ,0,1))
+       met_insulin_fit <- survfit(Surv(time_in_hospital,readmitted) ~ metformin + insulin ,data = dia1)
+       #VISUALISATION
+ 
+       
+       met_with_insulin_test = mean(summary(met_insulin_fit$surv))
+       if(met_with_insulin_test > 0.5)
+       {
+              print("PATIENT'S SURVIVABILITY HAS BEEN INCREASED AFTER TREATMENT WITH INSULIN AND FURTHER TREATMENT IS NOT REAQUIRED")
+       }
+       else{
+              print("PATIENT HAS TO BE TREATED WITH COMBINATION ALONG WITH INSULIN")
+              #COMBINATION OF DRUGS ALONG WITH INSULIN
+              #COMBINATION - 1
+              met_combi_fit_R <- survfit(Surv(time_in_hospital,readmitted) ~ metformin-rosiglitazone  ,data = dia1)
+            
+              met_combi_test_1 = mean(summary(met_combi_fit$surv))
+              #COMBINATION - 2
+              met_combi_fit_P <- survfit(Surv(time_in_hospital,readmitted) ~ metformin-pioglitazone ,data = dia1)
+             
+              met_combi_test_2 = mean(summary(met_combi_fit_P$surv))
+              #COMBINATION - 3
+              met_combi_fit_gly <- survfit(Surv(time_in_hospital,readmitted) ~ glyburide-metformin ,data = dia1)
+              
+              met_combi_test_3 = mean(summary(met_combi_test_fit_gly$surv))
+              #COMBINATION - 4
+              met_combi_fit_gli <- survfit(Surv(time_in_hospital,readmitted) ~ glipizide-metformin ,data = dia1)
+             
+              met_combi_test_4 = mean(summary(met_combi_test_fit_gli$surv))
+              
+              if(met_combi_test_1 > 0.5)
+              { 
+                          print("SURVIVABILITY CAPABILITY")
+                          print(met_combi_test_1)
+                          print("COMBINATION OF METFORMIN~ROSAGLITAZONE WITH INSULIN HAS INCREASED THE SURVIVABILITY CAPABILITY")
+              }else if(met_combi_test_2 > 0.5){
+                          print("SURVIVABILITY CAPABILITY")
+                          print(met_combi_test_2)
+                          print("COMBIMATION OF METFORMIN ~ PIOGLITAZONE WITH INSULIN HAS INCREASED THE SURVIVABILITY CAPABILITY")
+                      }
+               else if(met_combi_test_3 > 0.5){
+                          print("SURVIVABILITY CAPABILITY")
+                          print(met_combi_test_3)
+                          print("COMBIMATION OF METFORMIN ~ GLYBURIDE WITH INSULIN HAS INCREASED THE SURVIVABILITY CAPABILITY") 
+                     }
+               else if(met_combi_test_4 > 0.5){
+                          print("SURVIVABILITY CAPABILITY")
+                          print(met_combi_test_4)
+                          print("COMBIMATION OF METFORMIN ~ GLIPIZIDE HAS INCREASED THE SURVIVABILITY CAPABILITY")  
+                     }
+               else  {
+ 
+                    print("COMBINATIONS ALSO DID NOT GIVE ANY RESULT")
+                    }
+ 
+ }
+ }
[1] "PATIENT'S SURVIVABILITY HAS BEEN INCREASED AFTER TREATMENT WITH INSULIN AND FURTHER TREATMENT IS NOT REAQUIRED"
> #VISUALISATION AND SUMMARY
> autoplot( metformin_km_fit,main = "METFORMIN")
> summary(metformin_km_fit)
Call: survfit(formula = Surv(time_in_hospital, diabetesMed) ~ metformin, 
    data = dia)

                metformin=Down 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    575      39   0.9322 0.01049      0.91185       0.9530
    2    536      77   0.7983 0.01674      0.76613       0.8317
    3    459      98   0.6278 0.02016      0.58953       0.6686
    4    361      82   0.4852 0.02084      0.44604       0.5278
    5    279      65   0.3722 0.02016      0.33469       0.4139
    6    214      56   0.2748 0.01862      0.24061       0.3138
    7    158      48   0.1913 0.01640      0.16171       0.2263
    8    110      37   0.1270 0.01388      0.10246       0.1573
    9     73      18   0.0957 0.01227      0.07440       0.1230
   10     55      14   0.0713 0.01073      0.05309       0.0958
   11     41      13   0.0487 0.00898      0.03393       0.0699
   12     28       9   0.0330 0.00745      0.02124       0.0514
   13     19       9   0.0174 0.00545      0.00941       0.0321
   14     10      10   0.0000     NaN           NA           NA

                metformin=No 
 time n.risk n.event survival  std.err lower 95% CI upper 95% CI
    1  81778   11680   0.8572 0.001224      0.85478       0.8596
    2  70098   13761   0.6889 0.001619      0.68574       0.6921
    3  56337   14081   0.5167 0.001747      0.51330       0.5202
    4  42256   11040   0.3817 0.001699      0.37840       0.3851
    5  31216    7909   0.2850 0.001579      0.28193       0.2881
    6  23307    6121   0.2102 0.001425      0.20738       0.2130
    7  17186    4718   0.1525 0.001257      0.15002       0.1549
    8  12468    3556   0.1090 0.001090      0.10686       0.1111
    9   8912    2437   0.0792 0.000944      0.07735       0.0811
   10   6475    1915   0.0558 0.000802      0.05421       0.0574
   11   4560    1542   0.0369 0.000659      0.03564       0.0382
   12   3018    1198   0.0223 0.000516      0.02127       0.0233
   13   1820     970   0.0104 0.000355      0.00972       0.0111
   14    850     850   0.0000      NaN           NA           NA

                metformin=Steady 
 time n.risk n.event survival  std.err lower 95% CI upper 95% CI
    1  18346    2420  0.86809 0.002498      0.86321       0.8730
    2  15926    3277  0.68947 0.003416      0.68281       0.6962
    3  12649    3417  0.50322 0.003691      0.49603       0.5105
    4   9232    2630  0.35986 0.003544      0.35298       0.3669
    5   6602    1861  0.25842 0.003232      0.25216       0.2648
    6   4741    1272  0.18909 0.002891      0.18351       0.1948
    7   3469     990  0.13512 0.002524      0.13027       0.1402
    8   2479     735  0.09506 0.002165      0.09091       0.0994
    9   1744     501  0.06775 0.001855      0.06421       0.0715
   10   1243     371  0.04753 0.001571      0.04455       0.0507
   11    872     279  0.03232 0.001306      0.02986       0.0350
   12    593     219  0.02039 0.001043      0.01844       0.0225
   13    374     205  0.00921 0.000705      0.00793       0.0107
   14    169     169  0.00000      NaN           NA           NA

                metformin=Up 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   1067      69   0.9353 0.00753       0.9207       0.9502
    2    998     109   0.8332 0.01141       0.8111       0.8558
    3    889     160   0.6832 0.01424       0.6559       0.7117
    4    729     172   0.5220 0.01529       0.4929       0.5529
    5    557     131   0.3993 0.01499       0.3709       0.4297
    6    426      90   0.3149 0.01422       0.2882       0.3440
    7    336     103   0.2184 0.01265       0.1949       0.2446
    8    233      63   0.1593 0.01120       0.1388       0.1829
    9    170      46   0.1162 0.00981       0.0985       0.1371
   10    124      42   0.0769 0.00815       0.0624       0.0946
   11     82      21   0.0572 0.00711       0.0448       0.0729
   12     61      22   0.0366 0.00574       0.0269       0.0497
   13     39      26   0.0122 0.00336       0.0071       0.0209
   14     13      13   0.0000     NaN           NA           NA

> plot(met_insulin_fit,main = "METFORMIN + INSULIN")
> summary(met_insulin_fit)
Call: survfit(formula = Surv(time_in_hospital, readmitted) ~ metformin + 
    insulin, data = dia1)

                metformin=Down, insulin=Down   
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1     32       2    0.938  0.0428        0.857        1.000
    2     28       2    0.871  0.0605        0.760        0.998
    4     19       1    0.825  0.0726        0.694        0.980
    6     13       2    0.698  0.1029        0.523        0.932
    7      9       3    0.465  0.1293        0.270        0.802
   10      3       1    0.310  0.1532        0.118        0.817

                metformin=Down, insulin=No     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1     96       2    0.979  0.0146       0.9510        1.000
    2     88       1    0.968  0.0182       0.9331        1.000
    3     79       3    0.931  0.0272       0.8795        0.986
    4     67       5    0.862  0.0391       0.7885        0.942
    5     44       4    0.783  0.0515       0.6887        0.891
    6     35       3    0.716  0.0600       0.6079        0.844
    7     28       3    0.640  0.0680       0.5193        0.788
    8     19       2    0.572  0.0757       0.4416        0.742
   10     10       2    0.458  0.0944       0.3056        0.686
   11      6       1    0.381  0.1050       0.2224        0.654
   14      3       1    0.254  0.1252       0.0969        0.668

                metformin=Down, insulin=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    2     96       3    0.969  0.0178       0.9346        1.000
    3     81       4    0.921  0.0288       0.8662        0.979
    4     66       2    0.893  0.0340       0.8288        0.962
    5     46       4    0.815  0.0484       0.7258        0.916
    6     33       3    0.741  0.0600       0.6325        0.869
    7     26       2    0.684  0.0676       0.5638        0.830
    8     18       4    0.532  0.0852       0.3888        0.728
   11      9       1    0.473  0.0940       0.3204        0.698
   13      3       1    0.315  0.1432       0.1295        0.768
   14      2       1    0.158  0.1325       0.0304        0.819

                metformin=Down, insulin=Up     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    5     22       2    0.909  0.0613       0.7966            1
    6     18       1    0.859  0.0759       0.7220            1
   10      4       1    0.644  0.1944       0.3563            1
   13      2       1    0.322  0.2475       0.0713            1
   14      1       1    0.000     NaN           NA           NA

                metformin=No, insulin=Down   
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   5508     116    0.979 0.00193        0.975        0.983
    2   5015     201    0.940 0.00329        0.933        0.946
    3   4210     241    0.886 0.00457        0.877        0.895
    4   3306     224    0.826 0.00576        0.815        0.837
    5   2545     145    0.779 0.00663        0.766        0.792
    6   1959     122    0.730 0.00753        0.716        0.745
    7   1482      97    0.683 0.00846        0.666        0.699
    8   1103     100    0.621 0.00969        0.602        0.640
    9    779      63    0.570 0.01078        0.550        0.592
   10    567      62    0.508 0.01217        0.485        0.532
   11    389      30    0.469 0.01316        0.444        0.495
   12    265      29    0.418 0.01478        0.390        0.448
   13    161      23    0.358 0.01712        0.326        0.393
   14     78      19    0.271 0.02169        0.231        0.317

                metformin=No, insulin=No     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1  16456     480    0.971 0.00131        0.968        0.973
    2  14022     621    0.928 0.00210        0.924        0.932
    3  11225     654    0.874 0.00285        0.868        0.879
    4   8385     520    0.820 0.00353        0.813        0.827
    5   6085     389    0.767 0.00418        0.759        0.775
    6   4511     306    0.715 0.00484        0.706        0.725
    7   3275     261    0.658 0.00560        0.647        0.669
    8   2345     170    0.610 0.00627        0.598        0.623
    9   1654     120    0.566 0.00700        0.553        0.580
   10   1189     104    0.517 0.00790        0.501        0.532
   11    819      73    0.471 0.00884        0.454        0.488
   12    532      63    0.415 0.01021        0.395        0.435
   13    327      44    0.359 0.01180        0.337        0.383
   14    151      36    0.273 0.01536        0.245        0.305

                metformin=No, insulin=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1  11373     297    0.974 0.00150        0.971        0.977
    2   9988     439    0.931 0.00246        0.926        0.936
    3   8056     475    0.876 0.00336        0.870        0.883
    4   6104     439    0.813 0.00426        0.805        0.822
    5   4421     307    0.757 0.00504        0.747        0.767
    6   3270     237    0.702 0.00580        0.691        0.713
    7   2389     174    0.651 0.00654        0.638        0.664
    8   1723     156    0.592 0.00746        0.577        0.607
    9   1212      99    0.543 0.00828        0.527        0.560
   10    856      68    0.500 0.00913        0.483        0.519
   11    614      34    0.473 0.00978        0.454        0.492
   12    403      45    0.420 0.01142        0.398        0.443
   13    231      28    0.369 0.01349        0.343        0.396
   14    109      30    0.267 0.01857        0.233        0.306

                metformin=No, insulin=Up     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   4920     107    0.978 0.00208        0.974        0.982
    2   4501     157    0.944 0.00334        0.938        0.951
    3   3851     185    0.899 0.00455        0.890        0.908
    4   3101     175    0.848 0.00569        0.837        0.859
    5   2419     140    0.799 0.00670        0.786        0.812
    6   1861     122    0.747 0.00776        0.732        0.762
    7   1431      94    0.698 0.00874        0.681        0.715
    8   1076      82    0.644 0.00985        0.625        0.664
    9    788      58    0.597 0.01092        0.576        0.619
   10    591      51    0.545 0.01213        0.522        0.570
   11    412      35    0.499 0.01339        0.474        0.526
   12    278      31    0.443 0.01518        0.415        0.474
   13    166      22    0.385 0.01759        0.352        0.421
   14     83      18    0.301 0.02220        0.261        0.348

                metformin=Steady, insulin=Down   
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    848      11    0.987 0.00389        0.979        0.995
    2    780      31    0.948 0.00785        0.933        0.963
    3    661      22    0.916 0.01006        0.897        0.936
    4    534      41    0.846 0.01406        0.819        0.874
    5    391      19    0.805 0.01624        0.774        0.837
    6    293      16    0.761 0.01870        0.725        0.798
    7    231      17    0.705 0.02170        0.664        0.749
    8    166       8    0.671 0.02375        0.626        0.719
    9    131      13    0.604 0.02765        0.552        0.661
   10     88       6    0.563 0.03046        0.506        0.626
   12     52       2    0.541 0.03291        0.481        0.610
   13     38       9    0.413 0.04500        0.334        0.512
   14     15       5    0.275 0.05856        0.182        0.418

                metformin=Steady, insulin=No     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   3987      98    0.975 0.00245        0.971        0.980
    2   3440     152    0.932 0.00414        0.924        0.940
    3   2669     164    0.875 0.00582        0.864        0.887
    4   1934     117    0.822 0.00724        0.808        0.836
    5   1385      96    0.765 0.00877        0.748        0.782
    6    993      51    0.726 0.00990        0.707        0.745
    7    714      48    0.677 0.01147        0.655        0.700
    8    507      50    0.610 0.01368        0.584        0.638
    9    338      27    0.562 0.01547        0.532        0.593
   10    234      13    0.530 0.01686        0.498        0.564
   11    159       7    0.507 0.01828        0.472        0.544
   12    112       8    0.471 0.02099        0.431        0.514
   13     71       8    0.418 0.02567        0.370        0.471
   14     34      11    0.283 0.03774        0.217        0.367

                metformin=Steady, insulin=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   2301      36    0.984 0.00259        0.979        0.989
    2   2106      79    0.947 0.00478        0.938        0.957
    3   1710     106    0.889 0.00711        0.875        0.903
    4   1258      89    0.826 0.00922        0.808        0.844
    5    892      60    0.770 0.01104        0.749        0.792
    6    638      55    0.704 0.01323        0.678        0.730
    7    454      32    0.654 0.01492        0.626        0.684
    8    319      37    0.578 0.01765        0.545        0.614
    9    214      15    0.538 0.01927        0.501        0.577
   10    149      19    0.469 0.02233        0.427        0.515
   11    101       5    0.446 0.02352        0.402        0.495
   12     69      10    0.381 0.02760        0.331        0.439
   13     41       7    0.316 0.03203        0.259        0.386
   14     18       8    0.176 0.04109        0.111        0.278

                metformin=Steady, insulin=Up     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    815       9    0.989 0.00366        0.982        0.996
    2    763      18    0.966 0.00650        0.953        0.978
    3    675      26    0.928 0.00950        0.910        0.947
    4    555      18    0.898 0.01154        0.876        0.921
    5    443      24    0.850 0.01458        0.822        0.879
    6    349      19    0.803 0.01722        0.770        0.838
    7    262      14    0.760 0.01976        0.723        0.800
    8    195      11    0.718 0.02248        0.675        0.763
    9    148      12    0.659 0.02619        0.610        0.713
   10    104       5    0.628 0.02851        0.574        0.686
   11     71       7    0.566 0.03397        0.503        0.636
   12     43       4    0.513 0.03971        0.441        0.597
   13     23       4    0.424 0.05217        0.333        0.540
   14     13       3    0.326 0.06375        0.222        0.478

                metformin=Up, insulin=Down   
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    3     59       3    0.949  0.0286        0.895        1.000
    4     53       3    0.895  0.0404        0.820        0.978
    5     46       3    0.837  0.0499        0.745        0.941
    6     37       1    0.814  0.0535        0.716        0.926
    7     31       1    0.788  0.0578        0.683        0.910
    8     24       1    0.755  0.0641        0.640        0.892
   10     16       1    0.708  0.0755        0.575        0.873
   11     13       1    0.654  0.0871        0.503        0.849
   14      3       1    0.436  0.1871        0.188        1.000

                metformin=Up, insulin=No     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    166       3    0.982  0.0103        0.962        1.000
    2    153       4    0.956  0.0162        0.925        0.989
    3    133       8    0.899  0.0249        0.851        0.949
    4     98       5    0.853  0.0309        0.794        0.916
    5     79       5    0.799  0.0372        0.729        0.875
    6     59       4    0.745  0.0435        0.664        0.835
    7     47       2    0.713  0.0470        0.627        0.811
    8     31       3    0.644  0.0569        0.542        0.766
    9     24       3    0.564  0.0661        0.448        0.709
   13      4       1    0.423  0.1317        0.229        0.778

                metformin=Up, insulin=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    141       1    0.993 0.00707       0.9792        1.000
    2    132       2    0.978 0.01264       0.9534        1.000
    3    116       2    0.961 0.01715       0.9280        0.995
    4    100       3    0.932 0.02336       0.8875        0.979
    5     75       1    0.920 0.02614       0.8699        0.972
    6     56       5    0.838 0.04237       0.7586        0.925
    7     41       2    0.797 0.04918       0.7060        0.899
    9     20       2    0.717 0.06939       0.5932        0.867
   10     15       1    0.669 0.07955       0.5302        0.845
   11      7       1    0.574 0.11174       0.3916        0.840
   13      6       1    0.478 0.12762       0.2833        0.807
   14      2       1    0.239 0.18066       0.0543        1.000

                metformin=Up, insulin=Up     
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    2     65       2    0.969  0.0214        0.928        1.000
    3     61       1    0.953  0.0263        0.903        1.000
    4     53       2    0.917  0.0355        0.850        0.990
    6     41       2    0.873  0.0458        0.787        0.967
    7     28       2    0.810  0.0601        0.701        0.937
    8     22       1    0.773  0.0677        0.652        0.918
   10     11       2    0.633  0.1056        0.456        0.878
   12      5       1    0.506  0.1413        0.293        0.875

> autoplot(met_combi_fit_R,main = "DRUG COMBINATION:METFORMIN+ROSIGLITAZONE")
Error in autoplot(met_combi_fit_R, main = "DRUG COMBINATION:METFORMIN+ROSIGLITAZONE") : 
  object 'met_combi_fit_R' not found
> #COMBINATION - 1
>              met_combi_fit_R <- survfit(Surv(time_in_hospital,readmitted) ~ metformin-rosiglitazone  ,data = dia1)
> autoplot(met_combi_fit_R,main = "DRUG COMBINATION:METFORMIN+ROSIGLITAZONE")
> #COMBINATION - 2
>              #COMBINATION - 2
>              met_combi_fit_P <- survfit(Surv(time_in_hospital,readmitted) ~ metformin-pioglitazone ,data = dia1)
> autoplot(met_combi_fit_P,main = "DRUG COMBINATION:METFORMIN+PIOGLITAZONE ")
> summary(met_combi_fit_P)
Call: survfit(formula = Surv(time_in_hospital, readmitted) ~ metformin - 
    pioglitazone, data = dia1)

                metformin=Down 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    259       4    0.985 0.00766       0.9697        1.000
    2    242       6    0.960 0.01236       0.9362        0.985
    3    212       7    0.928 0.01678       0.8961        0.962
    4    178       8    0.887 0.02156       0.8455        0.930
    5    126      10    0.816 0.02915       0.7612        0.876
    6     99       9    0.742 0.03548       0.6758        0.815
    7     77       8    0.665 0.04095       0.5894        0.750
    8     51       6    0.587 0.04696       0.5016        0.686
   10     26       4    0.497 0.05747       0.3957        0.623
   11     20       2    0.447 0.06152       0.3412        0.585
   13      9       2    0.348 0.07826       0.2235        0.540
   14      6       3    0.174 0.08102       0.0697        0.433

                metformin=No 
 time n.risk n.event survival  std.err lower 95% CI upper 95% CI
    1  38257    1000    0.974 0.000816        0.972        0.975
    2  33526    1418    0.933 0.001325        0.930        0.935
    3  27342    1555    0.880 0.001808        0.876        0.883
    4  20896    1358    0.822 0.002260        0.818        0.827
    5  15470     981    0.770 0.002660        0.765        0.776
    6  11601     787    0.718 0.003063        0.712        0.724
    7   8577     626    0.666 0.003483        0.659        0.673
    8   6247     508    0.612 0.003942        0.604        0.619
    9   4433     340    0.565 0.004384        0.556        0.573
   10   3203     285    0.514 0.004901        0.505        0.524
   11   2234     172    0.475 0.005374        0.464        0.485
   12   1478     168    0.421 0.006169        0.409        0.433
   13    885     117    0.365 0.007184        0.351        0.380
   14    421     103    0.276 0.009380        0.258        0.295

                metformin=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   7951     154    0.981 0.00155        0.978        0.984
    2   7089     280    0.942 0.00271        0.937        0.947
    3   5715     318    0.889 0.00384        0.882        0.897
    4   4281     265    0.834 0.00487        0.825        0.844
    5   3111     199    0.781 0.00584        0.770        0.793
    6   2273     141    0.733 0.00676        0.719        0.746
    7   1661     111    0.684 0.00774        0.669        0.699
    8   1187     106    0.623 0.00904        0.605        0.641
    9    831      67    0.572 0.01018        0.553        0.593
   10    575      43    0.530 0.01132        0.508        0.552
   11    397      19    0.504 0.01218        0.481        0.529
   12    276      24    0.460 0.01403        0.434        0.489
   13    173      28    0.386 0.01745        0.353        0.422
   14     80      27    0.256 0.02345        0.214        0.306

                metformin=Up 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    435       4    0.991 0.00458        0.982        1.000
    2    412       8    0.972 0.00809        0.956        0.988
    3    369      14    0.935 0.01241        0.911        0.959
    4    304      13    0.895 0.01609        0.864        0.927
    5    244       9    0.862 0.01888        0.826        0.900
    6    193      12    0.808 0.02319        0.764        0.855
    7    147       7    0.770 0.02626        0.720        0.823
    8    102       5    0.732 0.02990        0.676        0.793
    9     75       5    0.683 0.03498        0.618        0.755
   10     58       4    0.636 0.03971        0.563        0.719
   11     37       2    0.602 0.04439        0.521        0.695
   12     26       1    0.579 0.04834        0.491        0.681
   13     16       2    0.506 0.06385        0.395        0.648
   14      6       2    0.337 0.10631        0.182        0.626

> #COMBINATION 3 
> met_ombi_test_3 <- survfit(Surv(time_in_hospital,readmitted) ~ metformin + glyburide,data = dia1)
> autoplot(met_ombi_test_3,main = "METFORMIN + GLYBURIDE")
Error in `levels<-`(`*tmp*`, value = as.character(levels)) : 
  factor level [5] is duplicated
> met_ombi_test_3 <- survfit(Surv(time_in_hospital,readmitted) ~ metformin-glyburide,data = dia1)
> autoplot(met_ombi_test_3)
> summary(met_ombi_test_3)
Call: survfit(formula = Surv(time_in_hospital, readmitted) ~ metformin - 
    glyburide, data = dia1)

                metformin=Down 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    259       4    0.985 0.00766       0.9697        1.000
    2    242       6    0.960 0.01236       0.9362        0.985
    3    212       7    0.928 0.01678       0.8961        0.962
    4    178       8    0.887 0.02156       0.8455        0.930
    5    126      10    0.816 0.02915       0.7612        0.876
    6     99       9    0.742 0.03548       0.6758        0.815
    7     77       8    0.665 0.04095       0.5894        0.750
    8     51       6    0.587 0.04696       0.5016        0.686
   10     26       4    0.497 0.05747       0.3957        0.623
   11     20       2    0.447 0.06152       0.3412        0.585
   13      9       2    0.348 0.07826       0.2235        0.540
   14      6       3    0.174 0.08102       0.0697        0.433

                metformin=No 
 time n.risk n.event survival  std.err lower 95% CI upper 95% CI
    1  38257    1000    0.974 0.000816        0.972        0.975
    2  33526    1418    0.933 0.001325        0.930        0.935
    3  27342    1555    0.880 0.001808        0.876        0.883
    4  20896    1358    0.822 0.002260        0.818        0.827
    5  15470     981    0.770 0.002660        0.765        0.776
    6  11601     787    0.718 0.003063        0.712        0.724
    7   8577     626    0.666 0.003483        0.659        0.673
    8   6247     508    0.612 0.003942        0.604        0.619
    9   4433     340    0.565 0.004384        0.556        0.573
   10   3203     285    0.514 0.004901        0.505        0.524
   11   2234     172    0.475 0.005374        0.464        0.485
   12   1478     168    0.421 0.006169        0.409        0.433
   13    885     117    0.365 0.007184        0.351        0.380
   14    421     103    0.276 0.009380        0.258        0.295

                metformin=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   7951     154    0.981 0.00155        0.978        0.984
    2   7089     280    0.942 0.00271        0.937        0.947
    3   5715     318    0.889 0.00384        0.882        0.897
    4   4281     265    0.834 0.00487        0.825        0.844
    5   3111     199    0.781 0.00584        0.770        0.793
    6   2273     141    0.733 0.00676        0.719        0.746
    7   1661     111    0.684 0.00774        0.669        0.699
    8   1187     106    0.623 0.00904        0.605        0.641
    9    831      67    0.572 0.01018        0.553        0.593
   10    575      43    0.530 0.01132        0.508        0.552
   11    397      19    0.504 0.01218        0.481        0.529
   12    276      24    0.460 0.01403        0.434        0.489
   13    173      28    0.386 0.01745        0.353        0.422
   14     80      27    0.256 0.02345        0.214        0.306

                metformin=Up 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    435       4    0.991 0.00458        0.982        1.000
    2    412       8    0.972 0.00809        0.956        0.988
    3    369      14    0.935 0.01241        0.911        0.959
    4    304      13    0.895 0.01609        0.864        0.927
    5    244       9    0.862 0.01888        0.826        0.900
    6    193      12    0.808 0.02319        0.764        0.855
    7    147       7    0.770 0.02626        0.720        0.823
    8    102       5    0.732 0.02990        0.676        0.793
    9     75       5    0.683 0.03498        0.618        0.755
   10     58       4    0.636 0.03971        0.563        0.719
   11     37       2    0.602 0.04439        0.521        0.695
   12     26       1    0.579 0.04834        0.491        0.681
   13     16       2    0.506 0.06385        0.395        0.648
   14      6       2    0.337 0.10631        0.182        0.626

> COMBINATION - 4
Error: object 'COMBINATION' not found
> #COMBINATION - 4
> met_combi_test_4 <- survfit(Surv(time_in_hospital,readmitted) ~ glipizide-metformin ,data = dia1)
> autoplot(met_combi_test_4,main = "GLIPIZIDE + METFORMIN")
> summary(met_combi_test_4)
Call: survfit(formula = Surv(time_in_hospital, readmitted) ~ glipizide - 
    metformin, data = dia1)

                glipizide=Down 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    296       3    0.990 0.00582        0.979        1.000
    2    277       4    0.976 0.00912        0.958        0.994
    3    251      14    0.921 0.01655        0.889        0.954
    4    204      13    0.862 0.02210        0.820        0.907
    5    153       7    0.823 0.02563        0.774        0.875
    6    124       7    0.777 0.02959        0.721        0.837
    7    103       7    0.724 0.03364        0.661        0.793
    8     83      10    0.637 0.03930        0.564        0.718
    9     60       3    0.605 0.04141        0.529        0.692
   10     50       6    0.532 0.04583        0.450        0.630
   11     38       3    0.490 0.04820        0.404        0.594
   12     29       1    0.473 0.04941        0.386        0.581
   13     21       3    0.406 0.05568        0.310        0.531
   14     14       4    0.290 0.06309        0.189        0.444

                glipizide=No 
 time n.risk n.event survival  std.err lower 95% CI upper 95% CI
    1  40720    1027    0.975 0.000777        0.973        0.976
    2  35760    1512    0.934 0.001277        0.931        0.936
    3  29057    1648    0.881 0.001748        0.877        0.884
    4  22165    1412    0.825 0.002183        0.820        0.829
    5  16373    1044    0.772 0.002580        0.767        0.777
    6  12253     824    0.720 0.002973        0.714        0.726
    7   9032     663    0.667 0.003390        0.661        0.674
    8   6567     538    0.613 0.003845        0.605        0.620
    9   4656     366    0.564 0.004288        0.556        0.573
   10   3336     293    0.515 0.004791        0.505        0.524
   11   2311     161    0.479 0.005225        0.469        0.489
   12   1546     171    0.426 0.006016        0.414        0.438
   13    932     138    0.363 0.007129        0.349        0.377
   14    431     108    0.272 0.009269        0.254        0.291

                glipizide=Steady 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1   5501     129    0.977 0.00204        0.973        0.981
    2   4858     190    0.938 0.00335        0.932        0.945
    3   3982     219    0.887 0.00464        0.878        0.896
    4   2984     203    0.826 0.00595        0.815        0.838
    5   2176     141    0.773 0.00707        0.759        0.787
    6   1585     109    0.720 0.00821        0.704        0.736
    7   1158      72    0.675 0.00924        0.657        0.693
    8    805      70    0.616 0.01078        0.596        0.638
    9    555      38    0.574 0.01202        0.551        0.598
   10    394      28    0.533 0.01341        0.508        0.560
   11    279      28    0.480 0.01541        0.450        0.511
   12    180      19    0.429 0.01763        0.396        0.465
   13    105       6    0.405 0.01926        0.369        0.444
   14     55      16    0.287 0.02829        0.236        0.348

                glipizide=Up 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1    385       3    0.992 0.00448        0.983        1.000
    2    374       6    0.976 0.00781        0.961        0.992
    3    348      13    0.940 0.01245        0.916        0.965
    4    306      16    0.891 0.01680        0.858        0.924
    5    249       7    0.866 0.01881        0.830        0.903
    6    204       9    0.827 0.02186        0.786        0.871
    7    169      10    0.778 0.02547        0.730        0.830
    8    132       7    0.737 0.02850        0.683        0.795
    9    102       5    0.701 0.03135        0.642        0.765
   10     82       9    0.624 0.03694        0.556        0.701
   11     60       3    0.593 0.03924        0.521        0.675
   12     39       2    0.563 0.04272        0.485        0.653
   13     25       2    0.518 0.04976        0.429        0.625
   14     13       7    0.239 0.07515        0.129        0.443

> 
